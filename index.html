<!DOCTYPE html>
<html ng-app="trenchesApp">
<head>
	<meta charset="utf-8">
	<title ng-bind='title'>Trenches</title>
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet"></link>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular-route.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular-sanitize.js"></script>
	<script src="//cdn.firebase.com/js/client/1.0.18/firebase.js"></script>
	<script src="//cdn.firebase.com/libs/angularfire/0.8.0/angularfire.js"></script>
	<script src="//cdn.firebase.com/js/simple-login/1.6.3/firebase-simple-login.js"></script>
	<link href="style.css" rel="stylesheet"></link>
	<script src="app.js"></script>
</head>
<body>

<h1>
	<i class='fa fa-credit-card' ></i> <a ng-href="/">Trenches</a>
</h1>
<div ng-controller="TrenchesCtrl" class='auth'>
	<div ng-show="auth.user">
		<p>You are logged in as {{auth.user.displayName}}</p>
		<button ng-click="auth.$logout()">Logout</button>
	</div>
	<div ng-hide="auth.user">
		<p>Welcome, please log in.</p>
		<button ng-click="auth.$login('twitter')">Login with <i class='fa fa-twitter'> Twitter</i></button>
		<button ng-click="auth.$login('github')">Login with <i class='fa fa-github'> GitHub</i></button>
	</div>
</div>

<div ng-view></div>
  
<!-- Partials below -->
<script type="text/ng-template" id="boards.html">
	<h2>Boards</h2>
	<div ng-controller='BoardListCtrl'>
		<ul class='boards'>
			<li ng-repeat="board in boards"><a href='#/board/{{board.$id}}'>{{board.settings.title}}</a></li>
		</ul>
	</div>
</script>

<script type="text/ng-template" id="board.html">
	<div ng-controller='BoardCtrl'>
		<h2>{{ settings.title }}</h2>
		<table class='board'>
			<tr class='head'>
				<th class='state' ng-repeat='state in states'>{{state}}<a ng-click='addCard(state)' ng-show='auth.user'><i class='add-card fa fa-plus'></i></a></th>
			</tr>
			<tr class='story'>
				<td ng-repeat='state in states' state='{{state}}' class='state state-{{state}}' droparea>
					<article ng-repeat='card in cards | filter:{state:state}' class='card type-{{card.type}}' draggable id='{{card.$id}}'>
						<a href='#/board/{{$parent.boardId}}/card/{{card.$id}}' ng-show="auth.user"><i class='edit-card fa fa-pencil'></i></a>
						<h4>{{card.title}}</h4>
						<p class='user'>{{card.owned_by}}</p>
						<input class='todo' ng-disabled='!auth.user' ng-model='card.left_todo' ng-change='cards.$save(card)'></input>
					</article>
				</td>
			</tr>
		</table>
	</div>
</script>

<script type="text/ng-template" id="card.html">
	<h2><a href='#/board/{{boardId}}'>{{board.title}}</a></h2>
	<article ng-controller='CardCtrl' ng-model='card' class='card type-{{card.type}}'>
		<label>Title: </label><input ng-model='card.title' autofocus></input>
		<label>Type: </label><select ng-model='card.type'><option ng-repeat='type in board.types'>{{type}}</option></select>
		<label>Left todo: </label><input ng-model='card.left_todo'></input>
		<button ng-click='removeCard(card.$id)'><i class='remove-card fa fa-times'></i> Delete</button>
	</article>
</script>

</body>
</html>